<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>学生管理系统</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- 顶部导航栏 -->
    <header class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-graduation-cap"></i>
                <span>学生管理系统</span>
            </div>
            <div class="nav-menu">
                <button class="nav-btn" onclick="showDashboard()">
                    <i class="fas fa-chart-line"></i>
                    数据统计
                </button>
                <button class="nav-btn" onclick="exportData()">
                    <i class="fas fa-download"></i>
                    导出数据
                </button>
                <button class="nav-btn" onclick="importData()">
                    <i class="fas fa-upload"></i>
                    导入数据
                </button>
            </div>
        </div>
    </header>

    <!-- 主要内容区域 -->
    <main class="main-content">
        <!-- 侧边栏 -->
        <aside class="sidebar">
            <nav class="sidebar-nav">
                <a href="#" class="sidebar-link active" onclick="showSection('students')">
                    <i class="fas fa-users"></i>
                    <span>学生管理</span>
                </a>
                <a href="#" class="sidebar-link" onclick="showSection('statistics')">
                    <i class="fas fa-chart-bar"></i>
                    <span>数据统计</span>
                </a>
                <a href="#" class="sidebar-link" onclick="showSection('settings')">
                    <i class="fas fa-cog"></i>
                    <span>系统设置</span>
                </a>
            </nav>
        </aside>

        <!-- 内容区域 -->
        <section class="content">
            <!-- 学生管理页面 -->
            <div id="students-section" class="section active">
                <!-- 操作栏 -->
                <div class="action-bar">
                    <div class="search-container">
                        <input type="text" id="searchInput" placeholder="搜索学生姓名、学号、专业..." class="search-input">
                        <button class="search-btn" onclick="searchStudents()">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                    <div class="action-buttons">
                        <button class="btn btn-primary" onclick="openAddModal()">
                            <i class="fas fa-plus"></i>
                            添加学生
                        </button>
                        <button class="btn btn-secondary" onclick="clearSearch()">
                            <i class="fas fa-times"></i>
                            清除搜索
                        </button>
                    </div>
                </div>

                <!-- 学生列表 -->
                <div class="table-container">
                    <table class="student-table">
                        <thead>
                            <tr>
                                <th>学号</th>
                                <th>姓名</th>
                                <th>年龄</th>
                                <th>专业</th>
                                <th>班级</th>
                                <th>入学日期</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody id="studentTableBody">
                            <!-- 学生数据将在这里动态生成 -->
                        </tbody>
                    </table>
                    <div id="emptyState" class="empty-state" style="display: none;">
                        <i class="fas fa-user-slash"></i>
                        <p>暂无学生数据</p>
                    </div>
                </div>

                <!-- 分页 -->
                <div class="pagination" id="pagination">
                    <!-- 分页按钮将在这里动态生成 -->
                </div>
            </div>

            <!-- 数据统计页面 -->
            <div id="statistics-section" class="section">
                <div class="statistics-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="totalStudents">0</h3>
                            <p>总学生数</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="totalMajors">0</h3>
                            <p>专业数量</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-calendar"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="avgAge">0</h3>
                            <p>平均年龄</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-school"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="totalClasses">0</h3>
                            <p>班级数量</p>
                        </div>
                    </div>
                </div>

                <!-- 专业分布图表 -->
                <div class="chart-container">
                    <h3>专业分布</h3>
                    <div id="majorChart" class="chart">
                        <!-- 图表内容将在这里生成 -->
                    </div>
                </div>
            </div>

            <!-- 系统设置页面 -->
            <div id="settings-section" class="section">
                <div class="settings-container">
                    <h2>系统设置</h2>
                    <div class="setting-item">
                        <label>每页显示数量:</label>
                        <select id="pageSize" onchange="changePageSize()">
                            <option value="5">5条</option>
                            <option value="10" selected>10条</option>
                            <option value="20">20条</option>
                            <option value="50">50条</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label>主题色彩:</label>
                        <div class="color-options">
                            <button class="color-btn active" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%)" onclick="changeTheme('default')"></button>
                            <button class="color-btn" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%)" onclick="changeTheme('pink')"></button>
                            <button class="color-btn" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)" onclick="changeTheme('blue')"></button>
                            <button class="color-btn" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)" onclick="changeTheme('green')"></button>
                        </div>
                    </div>
                    <div class="setting-item">
                        <button class="btn btn-danger" onclick="clearAllData()">
                            <i class="fas fa-trash"></i>
                            清空所有数据
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- 添加/编辑学生模态框 -->
    <div id="studentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">添加学生</h2>
                <button class="modal-close" onclick="closeModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="studentForm" class="student-form">
                    <div class="form-group">
                        <label for="studentId">学号 *</label>
                        <input type="text" id="studentId" name="studentId" required>
                        <span class="error-message" id="studentIdError"></span>
                    </div>
                    <div class="form-group">
                        <label for="studentName">姓名 *</label>
                        <input type="text" id="studentName" name="studentName" required>
                        <span class="error-message" id="studentNameError"></span>
                    </div>
                    <div class="form-group">
                        <label for="studentAge">年龄 *</label>
                        <input type="number" id="studentAge" name="studentAge" min="16" max="35" required>
                        <span class="error-message" id="studentAgeError"></span>
                    </div>
                    <div class="form-group">
                        <label for="studentMajor">专业 *</label>
                        <input type="text" id="studentMajor" name="studentMajor" required>
                        <span class="error-message" id="studentMajorError"></span>
                    </div>
                    <div class="form-group">
                        <label for="studentClass">班级 *</label>
                        <input type="text" id="studentClass" name="studentClass" required>
                        <span class="error-message" id="studentClassError"></span>
                    </div>
                    <div class="form-group">
                        <label for="enrollDate">入学日期 *</label>
                        <input type="date" id="enrollDate" name="enrollDate" required>
                        <span class="error-message" id="enrollDateError"></span>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeModal()">取消</button>
                <button type="button" class="btn btn-primary" onclick="saveStudent()">保存</button>
            </div>
        </div>
    </div>

    <!-- 确认删除模态框 -->
    <div id="confirmModal" class="modal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2>确认删除</h2>
            </div>
            <div class="modal-body">
                <p>确定要删除这个学生吗？此操作不可恢复。</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeConfirmModal()">取消</button>
                <button type="button" class="btn btn-danger" onclick="confirmDelete()">删除</button>
            </div>
        </div>
    </div>

    <!-- Toast 提示 -->
    <div id="toast" class="toast">
        <div class="toast-content">
            <span id="toastMessage"></span>
        </div>
    </div>

    <!-- 文件上传隐藏输入 -->
    <input type="file" id="fileInput" accept=".json" style="display: none;" onchange="handleFileImport(event)">

    <script src="script.js"></script>
</body>
</html>